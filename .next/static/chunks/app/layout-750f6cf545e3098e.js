(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{3274:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,AuthProvider:()=>u});var a=r(5155),i=r(2115),s=r(3004),l=r(8915),o=r(5317);let n=(0,i.createContext)(void 0);function u(e){let{children:t}=e,[r,u]=(0,i.useState)(null),[d,c]=(0,i.useState)(null),[p,h]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=(0,s.hg)(l.j2,async e=>{u(e),e?await v(e.uid):c(null),h(!1)});return()=>e()},[]);let v=async e=>{try{let i=await (0,o.x7)((0,o.H9)(l.db,"users",e));if(i.exists())c(i.data());else{var t,a;let i={uid:e,email:(null==r?void 0:r.email)||"",displayName:(null==r?void 0:r.displayName)||"",photoURL:(null==r?void 0:r.photoURL)||"",githubUsername:(null==r||null==(t=r.providerData[0])?void 0:t.providerId)==="github.com"?(null==r||null==(a=r.providerData[0])?void 0:a.displayName)||"":void 0,createdAt:new Date,lastLoginAt:new Date,subscription:{plan:"free",status:"active",auditsRemaining:1}};await (0,o.BN)((0,o.H9)(l.db,"users",e),i),c(i)}}catch(e){console.error("Error fetching user profile:",e)}},b=async()=>{try{let e=await (0,s.df)(l.j2,l.pD);if(e.user&&d){let t={...d,lastLoginAt:new Date};await (0,o.BN)((0,o.H9)(l.db,"users",e.user.uid),t),c(t)}}catch(e){throw console.error("GitHub sign in error:",e),e}},m=async()=>{try{await (0,s.CI)(l.j2),c(null)}catch(e){throw console.error("Sign out error:",e),e}},g=async()=>{r&&await v(r.uid)};return(0,a.jsx)(n.Provider,{value:{user:r,userProfile:d,loading:p,signInWithGitHub:b,signOut:m,refreshUserProfile:g},children:t})}function d(){let e=(0,i.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8915:(e,t,r)=>{"use strict";r.d(t,{db:()=>n,j2:()=>o,pD:()=>u});var a=r(3915),i=r(3004),s=r(5317);let l=0===(0,a.Dk)().length?(0,a.Wp)({apiKey:"AIzaSyDKdgXZotQ1ICFeMQB8uSKPBoF4agTs0pU",authDomain:"vibelog-lj17r.firebaseapp.com",projectId:"vibelog-lj17r",storageBucket:"vibelog-lj17r.firebasestorage.app",messagingSenderId:"503085211993",appId:"1:503085211993:web:0f0251743019bc1830ec48"}):(0,a.Dk)()[0],o=(0,i.xI)(l),n=(0,s.aU)(l),u=new i.Dt;u.addScope("repo")},9324:()=>{},9840:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},9847:(e,t,r)=>{Promise.resolve().then(r.bind(r,3274)),Promise.resolve().then(r.t.bind(r,9840,23)),Promise.resolve().then(r.t.bind(r,9324,23)),Promise.resolve().then(r.bind(r,3568))}},e=>{e.O(0,[385,992,416,16,568,441,964,358],()=>e(e.s=9847)),_N_E=e.O()}]);