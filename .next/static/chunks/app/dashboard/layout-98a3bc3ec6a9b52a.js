(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{1851:(e,r,a)=>{Promise.resolve().then(a.bind(a,5241))},3274:(e,r,a)=>{"use strict";a.d(r,{A:()=>c,AuthProvider:()=>o});var t=a(5155),s=a(2115),i=a(3004),n=a(8915),l=a(5317);let d=(0,s.createContext)(void 0);function o(e){let{children:r}=e,[a,o]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,i.hg)(n.j2,async e=>{o(e),e?await x(e.uid):u(null),h(!1)});return()=>e()},[]);let x=async e=>{try{let s=await (0,l.x7)((0,l.H9)(n.db,"users",e));if(s.exists())u(s.data());else{var r,t;let s={uid:e,email:(null==a?void 0:a.email)||"",displayName:(null==a?void 0:a.displayName)||"",photoURL:(null==a?void 0:a.photoURL)||"",githubUsername:(null==a||null==(r=a.providerData[0])?void 0:r.providerId)==="github.com"?(null==a||null==(t=a.providerData[0])?void 0:t.displayName)||"":void 0,createdAt:new Date,lastLoginAt:new Date,subscription:{plan:"free",status:"active",auditsRemaining:1}};await (0,l.BN)((0,l.H9)(n.db,"users",e),s),u(s)}}catch(e){console.error("Error fetching user profile:",e)}},p=async()=>{try{let e=await (0,i.df)(n.j2,n.pD);if(e.user&&c){let r={...c,lastLoginAt:new Date};await (0,l.BN)((0,l.H9)(n.db,"users",e.user.uid),r),u(r)}}catch(e){throw console.error("GitHub sign in error:",e),e}},b=async()=>{try{await (0,i.CI)(n.j2),u(null)}catch(e){throw console.error("Sign out error:",e),e}},f=async()=>{a&&await x(a.uid)};return(0,t.jsx)(d.Provider,{value:{user:a,userProfile:c,loading:m,signInWithGitHub:p,signOut:b,refreshUserProfile:f},children:r})}function c(){let e=(0,s.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5241:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>D,dynamic:()=>A});var t=a(5155),s=a(2115),i=a(5695),n=a(3274),l=a(4794),d=a(6874),o=a.n(d),c=a(8199),u=a(5525),m=a(7434),h=a(381),x=a(7951),p=a(1539),b=a(4416),f=a(4783),g=a(1007),v=a(4835),j=a(2596),N=a(9688);function w(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,N.QP)((0,j.$)(r))}let y=[{name:"Dashboard",href:"/dashboard",icon:c.A},{name:"New Audit",href:"/dashboard/audit",icon:u.A},{name:"Reports",href:"/dashboard/reports",icon:m.A},{name:"Settings",href:"/dashboard/settings",icon:h.A}];function k(){var e,r,a,d,c,m;let[h,j]=(0,s.useState)(!1),N=(0,i.usePathname)(),{user:k,userProfile:A,signOut:D}=(0,n.A)(),S=async()=>{try{await D()}catch(e){console.error("Sign out error:",e)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>j(!h),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-dark-900 border border-dark-800 rounded-lg text-white hover:bg-dark-800 transition-colors",children:h?(0,t.jsx)(b.A,{className:"w-5 h-5"}):(0,t.jsx)(f.A,{className:"w-5 h-5"})}),(0,t.jsx)(l.P.div,{initial:!1,animate:{x:h?0:"-100%",opacity:+!!h},transition:{duration:.3},className:w("fixed inset-y-0 left-0 z-40 w-64 bg-dark-900 border-r border-dark-800 lg:translate-x-0 lg:static lg:inset-0","transform transition-transform duration-300 ease-in-out lg:transition-none"),children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsx)("div",{className:"p-6 border-b border-dark-800",children:(0,t.jsxs)(o(),{href:"/dashboard",className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-400 to-accent-400 rounded-lg flex items-center justify-center",children:(0,t.jsx)(u.A,{className:"w-5 h-5 text-white"})}),(0,t.jsx)("span",{className:"text-xl font-bold gradient-text",children:"vibecatcher.dev"})]})}),(0,t.jsx)("nav",{className:"flex-1 px-4 py-6",children:(0,t.jsx)("ul",{className:"space-y-2",children:y.map(e=>{let r=N===e.href;return(0,t.jsx)("li",{children:(0,t.jsxs)(o(),{href:e.href,className:w("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",r?"bg-primary-600/20 text-primary-400 border border-primary-500/30":"text-dark-300 hover:text-white hover:bg-dark-800"),onClick:()=>j(!1),children:[(0,t.jsx)(e.icon,{className:"w-5 h-5"}),e.name]})},e.name)})})}),k&&A&&(0,t.jsxs)("div",{className:"p-4 border-t border-dark-800",children:[(0,t.jsxs)("div",{className:w("p-3 rounded-lg border mb-3",(e=>{switch(e){case"pro":return"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border-yellow-500/30";case"basic":return"bg-gradient-to-r from-blue-500/20 to-purple-500/20 border-blue-500/30";default:return"bg-gradient-to-r from-green-500/20 to-emerald-500/20 border-green-500/30"}})((null==(e=A.subscription)?void 0:e.plan)||"free")),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(e=>{switch(e){case"pro":return(0,t.jsx)(x.A,{className:"w-4 h-4 text-yellow-400"});case"basic":return(0,t.jsx)(p.A,{className:"w-4 h-4 text-blue-400"});default:return(0,t.jsx)(u.A,{className:"w-4 h-4 text-green-400"})}})((null==(r=A.subscription)?void 0:r.plan)||"free"),(0,t.jsxs)("span",{className:"text-sm font-medium text-white capitalize",children:[(null==(a=A.subscription)?void 0:a.plan)||"free"," Plan"]})]}),(0,t.jsx)("div",{className:"text-xs text-dark-300",children:(null==(d=A.subscription)?void 0:d.plan)==="free"?(0,t.jsx)("span",{children:"1 audit remaining"}):(null==(c=A.subscription)?void 0:c.plan)==="single"?(0,t.jsx)("span",{children:"Single audit"}):(0,t.jsxs)("span",{children:[(null==(m=A.subscription)?void 0:m.auditsRemaining)||0," audits remaining"]})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-dark-800 rounded-lg mb-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-dark-700",children:A.photoURL?(0,t.jsx)("img",{src:A.photoURL,alt:A.displayName,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(g.A,{className:"w-5 h-5 text-dark-400"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-white truncate",children:A.displayName}),(0,t.jsx)("p",{className:"text-xs text-dark-400 truncate",children:A.email})]})]}),(0,t.jsxs)("button",{onClick:S,className:"w-full flex items-center gap-3 px-3 py-2 text-sm font-medium text-dark-300 hover:text-white hover:bg-dark-800 rounded-lg transition-colors",children:[(0,t.jsx)(v.A,{className:"w-5 h-5"}),"Sign Out"]})]})]})}),h&&(0,t.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>j(!1)})]})}let A="force-dynamic";function D(e){let{children:r}=e,{user:a,loading:d}=(0,n.A)(),o=(0,i.useRouter)();return((0,s.useEffect)(()=>{d||a||o.push("/")},[a,d,o]),d)?(0,t.jsx)("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-dark-300",children:"Loading..."})]})}):a?(0,t.jsxs)("div",{className:"min-h-screen bg-dark-950",children:[(0,t.jsx)(k,{}),(0,t.jsx)(l.P.main,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"lg:ml-80 min-h-screen",children:r})]}):null}},8915:(e,r,a)=>{"use strict";a.d(r,{db:()=>d,j2:()=>l,pD:()=>o});var t=a(3915),s=a(3004),i=a(5317);let n=0===(0,t.Dk)().length?(0,t.Wp)({apiKey:"AIzaSyDKdgXZotQ1ICFeMQB8uSKPBoF4agTs0pU",authDomain:"vibelog-lj17r.firebaseapp.com",projectId:"vibelog-lj17r",storageBucket:"vibelog-lj17r.firebasestorage.app",messagingSenderId:"503085211993",appId:"1:503085211993:web:0f0251743019bc1830ec48"}):(0,t.Dk)()[0],l=(0,s.xI)(n),d=(0,i.aU)(n),o=new s.Dt;o.addScope("repo")}},e=>{e.O(0,[992,416,16,734,279,104,441,964,358],()=>e(e.s=1851)),_N_E=e.O()}]);